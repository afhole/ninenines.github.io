<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Loïc Hoguin based on a design from (Soft10) Pol Cámara">

    <title>Nine Nines: gun:await(3)</title>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href="/css/99s.css?r=1" rel="stylesheet">

    <link rel="shortcut icon" href="/img/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/ico/apple-touch-icon-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/ico/apple-touch-icon-72.png">
    <link rel="apple-touch-icon-precomposed" href="/img/ico/apple-touch-icon-57.png">

    
</head>


<body class="">
  <header id="page-head">
    <div id="topbar" class="container">
        <div class="row">
          <div class="span2">
            <h1 id="logo"><a href="/" title="99s">99s</a></h1>
          </div>
          <div class="span10">
            
            <div id="side-header">
              <nav>
                <ul>
                  <li><a title="Hear my thoughts" href="/articles">Articles</a></li>
  				  <li><a title="Watch my talks" href="/talks">Talks</a></li>
  				  <li class="active"><a title="Read the docs" href="/docs">Documentation</a></li>
  				  <li><a title="Request my services" href="/services">Consulting & Training</a></li>
                </ul>
              </nav> 
              <ul id="social">
                <li>
                  <a href="https://github.com/ninenines" title="Check my Github repositories"><img src="/img/ico_github.png" data-hover="/img/ico_github_alt.png" alt="Github"></a>
                </li>
                    <li>
						<a title="Contact me" href="mailto:contact@ninenines.eu"><img src="/img/ico_mail.png" data-hover="/img/ico_mail_alt.png"></a>
					</li>
              </ul>
            </div>
          </div>
        </div>
    </div>


</header>

<div id="contents" class="two_col">
<div class="container">
<div class="row">
<div id="docs" class="span9 maincol">

<h1 class="lined-header"><span>gun:await(3)</span></h1>

<div class="sect1">
<h2 id="_name">Name</h2>
<div class="sectionbody">
<div class="paragraph"><p>gun:await - Wait for a response</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>)
    <span style="color: #990000">-&gt;</span> <span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #993399">5000</span>, <span style="color: #009900">MonitorRef</span>)

<span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #009900">MonitorRef</span>)
    <span style="color: #990000">-&gt;</span> <span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #993399">5000</span>, <span style="color: #009900">MonitorRef</span>)

<span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #009900">Timeout</span>)
    <span style="color: #990000">-&gt;</span> <span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #009900">Timeout</span>, <span style="color: #009900">MonitorRef</span>)

<span style="font-weight: bold"><span style="color: #000000">await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>, <span style="color: #009900">Timeout</span>, <span style="color: #009900">MonitorRef</span>)
    <span style="color: #990000">-&gt;</span> <span style="color: #009900">Result</span>

<span style="color: #009900">ConnPid</span>    <span style="color: #990000">::</span> <span style="font-weight: bold"><span style="color: #000080">pid</span></span>()
<span style="color: #009900">StreamRef</span>  <span style="color: #990000">::</span> <span style="font-weight: bold"><span style="color: #000080">reference</span></span>()
<span style="color: #009900">MonitorRef</span> <span style="color: #990000">::</span> <span style="font-weight: bold"><span style="color: #000080">reference</span></span>()
<span style="color: #009900">Timeout</span>    <span style="color: #990000">::</span> <span style="font-weight: bold"><span style="color: #000000">timeout</span></span>()
<span style="color: #009900">Result</span>     <span style="color: #990000">::</span> <span style="font-weight: bold"><span style="color: #000000">tuple</span></span>() <span style="color: #990000">-</span> <span style="color: #FF6600">see</span> <span style="color: #FF6600">below</span></tt></pre></div></div>
<div class="paragraph"><p>Wait for a response.</p></div>
<div class="paragraph"><p>This function waits for a message from the given stream and
returns it as a tuple. An error will be returned should the
process fail or a relevant message is not received within
the specified duration.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_arguments">Arguments</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
ConnPid
</dt>
<dd>
<p>
The pid of the Gun connection process.
</p>
</dd>
<dt class="hdlist1">
StreamRef
</dt>
<dd>
<p>
Identifier of the stream for the original request.
</p>
</dd>
<dt class="hdlist1">
Timeout
</dt>
<dd>
<p>
How long to wait for a message, in milliseconds.
</p>
</dd>
<dt class="hdlist1">
MonitorRef
</dt>
<dd>
<p>
Monitor for the Gun connection process.
</p>
<div class="paragraph"><p>A monitor is automatically created for the duration of this
call when one is not provided.</p></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_return_value">Return value</h2>
<div class="sectionbody">
<div class="paragraph"><p>A number of different tuples can be returned. They correspond
to the message of the same name and they contain the same
elements minus the pid and stream reference. Error tuples
may also be returned when a timeout or an error occur.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">Result</span> <span style="color: #990000">::</span> {<span style="color: #FF6600">inform</span>, <span style="color: #009900">Status</span>, <span style="color: #009900">Headers</span>}
          {<span style="color: #FF6600">response</span>, <span style="color: #009900">IsFin</span>, <span style="color: #009900">Status</span>, <span style="color: #009900">Headers</span>}
          {<span style="color: #FF6600">data</span>, <span style="color: #009900">IsFin</span>, <span style="color: #009900">Data</span>}
          {<span style="color: #FF6600">trailers</span>, <span style="color: #009900">Trailers</span>}
          {<span style="color: #FF6600">push</span>, <span style="color: #009900">NewStreamRef</span>, <span style="color: #009900">Method</span>, <span style="color: #009900">URI</span>, <span style="color: #009900">Headers</span>}
          {<span style="color: #FF6600">error</span>, <span style="color: #009900">Reason</span>}

<span style="color: #009900">Reason</span> <span style="color: #990000">::</span> <span style="color: #FF6600">timeout</span> | <span style="font-weight: bold"><span style="color: #000000">any</span></span>()</tt></pre></div></div>
<div class="paragraph"><p>Because the messages and returned tuples are equivalent,
please refer to the manual pages for each message for
further information:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="../gun_push">gun_push(3)</a> - Server-initiated push
</p>
</li>
<li>
<p>
<a href="../gun_inform">gun_inform(3)</a> - Informational response
</p>
</li>
<li>
<p>
<a href="../gun_response">gun_response(3)</a> - Response
</p>
</li>
<li>
<p>
<a href="../gun_data">gun_data(3)</a> - Response body
</p>
</li>
<li>
<p>
<a href="../gun_trailers">gun_trailers(3)</a> - Response trailers
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog">Changelog</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<strong>1.0</strong>: Function introduced.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">Examples</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">Wait for a response</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">StreamRef</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">gun:get</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #FF0000">"/articles"</span>, [
    {<span style="color: #990000">&lt;&lt;</span><span style="color: #FF0000">"accept"</span><span style="color: #990000">&gt;&gt;</span>, <span style="color: #990000">&lt;&lt;</span><span style="color: #FF0000">"text/html;q=1.0, application/xml;q=0.1"</span><span style="color: #990000">&gt;&gt;</span>}
])<span style="color: #990000">.</span>
{<span style="color: #FF6600">response</span>, <span style="color: #FF6600">nofin</span>, <span style="color: #993399">200</span>, <span style="color: #009900">_Headers</span>} <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">gun:await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>)<span style="color: #990000">.</span>
{<span style="color: #FF6600">data</span>, <span style="color: #FF6600">fin</span>, <span style="color: #990000">&lt;&lt;</span><span style="color: #FF0000">"Hello world!"</span><span style="color: #990000">&gt;&gt;</span>} <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">gun:await</span></span>(<span style="color: #009900">ConnPid</span>, <span style="color: #009900">StreamRef</span>)<span style="color: #990000">.</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">See also</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="../gun">gun(3)</a>,
<a href="../gun.get">gun:get(3)</a>,
<a href="../gun.head">gun:head(3)</a>,
<a href="../gun.options">gun:options(3)</a>,
<a href="../gun.patch">gun:patch(3)</a>,
<a href="../gun.post">gun:post(3)</a>,
<a href="../gun.put">gun:put(3)</a>,
<a href="../gun.delete">gun:delete(3)</a>,
<a href="../gun.request">gun:request(3)</a>,
<a href="../gun.await_body">gun:await_body(3)</a></p></div>
</div>
</div>





</div>

<div class="span3 sidecol">


<h3>
	Gun
	1.0
	Function Reference
	
</h3>

<ul>
	
		<li><a href="/docs/en/gun/1.0/guide">User Guide</a></li>
	
	
		<li><a href="/docs/en/gun/1.0/manual">Function Reference</a></li>
	
	
</ul>

<h4 id="docs-nav">Navigation</h4>

<h4>Version select</h4>
<ul>
	
	
	
		<li><a href="/docs/en/gun/1.0/manual">1.0</a></li>
	
</ul>

</div>
</div>
</div>
</div>

      <footer>
        <div class="container">
          <div class="row">
            <div class="span6">
              <p id="scroll-top"><a href="#">↑ Scroll to top</a></p>
              <nav>
                <ul>
                  <li><a href="mailto:contact@ninenines.eu" title="Contact us">Contact us</a></li><li><a href="https://github.com/ninenines/ninenines.github.io" title="Github repository">Contribute to this site</a></li>
                </ul>
              </nav>
            </div>
            <div class="span6 credits">
               <p><img src="/img/footer_logo.png"></p>
               <p>Copyright &copy; Loïc Hoguin 2012-2018</p>
            </div>
          </div>
        </div>
      </footer>

    
    <script src="/js/custom.js"></script>
  </body>
</html>


